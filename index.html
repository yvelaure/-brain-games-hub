
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Brain Games Hub V2 - Enhanced cognitive training with 6 games, advanced themes, achievements, and multiplayer features.">
<meta name="theme-color" content="#667eea">
<link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQnJhaW4gR2FtZXMgSHViIFYyIiwic2hvcnRfbmFtZSI6IkJyYWluIEdhbWVzIFYyIiwic3RhcnRfdXJsIjoiLyIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwidGhlbWVfY29sb3IiOiIjNjY3ZWVhIiwiYmFja2dyb3VuZF9jb2xvciI6IiM2NjdlZWEiLCJpY29ucyI6W3sic3JjIjoiaWNvbi0xOTJ4MTkyLnBuZyIsInNpemVzIjoiMTkyeDE5MiIsInR5cGUiOiJpbWFnZS9wbmcifV19">
<title>Brain Games Hub V2 - Enhanced Cognitive Training</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;color:white;overflow-x:hidden}
.container{max-width:420px;margin:0 auto;padding:20px;text-align:center;position:relative}
h1{font-size:2.8em;margin-bottom:15px;text-shadow:3px 3px 6px rgba(0,0,0,0.4);animation:glow 3s ease-in-out infinite alternate}
@keyframes glow{from{text-shadow:3px 3px 6px rgba(0,0,0,0.4),0 0 20px rgba(255,255,255,0.2)}to{text-shadow:3px 3px 6px rgba(0,0,0,0.4),0 0 30px rgba(255,255,255,0.4)}}
.subtitle{font-size:1.2em;margin-bottom:25px;opacity:0.95;font-weight:300}
.version-badge{background:linear-gradient(45deg,#ff6b6b,#ff8e53);padding:4px 12px;border-radius:20px;font-size:0.8em;font-weight:bold;display:inline-block;margin-bottom:20px;animation:pulse 2s infinite}
.theme-controls{position:absolute;top:15px;right:15px;display:flex;gap:10px}
.theme-btn{background:rgba(255,255,255,0.25);border:none;border-radius:50%;width:45px;height:45px;color:white;cursor:pointer;font-size:1.1em;transition:all 0.3s ease;backdrop-filter:blur(10px)}
.theme-btn:hover{background:rgba(255,255,255,0.4);transform:scale(1.1)}
.game-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin:25px 0}
.game-card{background:rgba(255,255,255,0.2);backdrop-filter:blur(15px);border-radius:25px;padding:20px;cursor:pointer;border:2px solid rgba(255,255,255,0.3);transition:all 0.4s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;min-height:120px;display:flex;flex-direction:column;justify-content:center}
.game-card::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);transition:left 0.6s;z-index:1}
.game-card:hover::before{left:100%}
.game-card:hover{transform:translateY(-10px) scale(1.05);background:rgba(255,255,255,0.35);box-shadow:0 20px 50px rgba(0,0,0,0.4)}
.game-icon{font-size:2.5em;margin-bottom:8px;position:relative;z-index:2}
.game-title{font-size:1.1em;font-weight:bold;margin-bottom:5px;position:relative;z-index:2}
.game-subtitle{font-size:0.85em;opacity:0.9;position:relative;z-index:2}
.new-badge{position:absolute;top:8px;right:8px;background:#ff4757;color:white;padding:2px 8px;border-radius:10px;font-size:0.7em;font-weight:bold;z-index:3}
.stats-bar{background:rgba(255,255,255,0.15);border-radius:20px;padding:20px;margin:25px 0;backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,0.2)}
.stat-row{display:flex;justify-content:space-between;align-items:center;margin:12px 0;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.1)}
.stat-row:last-child{border-bottom:none}
.stat-label{font-weight:600;opacity:0.9}
.stat-value{font-weight:bold;background:linear-gradient(45deg,#ff6b6b,#ff8e53);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:1.1em}
.achievements{display:flex;justify-content:center;gap:10px;margin:20px 0;flex-wrap:wrap}
.achievement{width:45px;height:45px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2em;border:2px solid rgba(255,255,255,0.3);background:rgba(255,255,255,0.1);transition:all 0.3s ease}
.achievement.unlocked{background:linear-gradient(45deg,#ffd700,#ffed4e);color:#333;border-color:#ffd700;animation:sparkle 2s ease-in-out infinite}
@keyframes sparkle{0%,100%{transform:scale(1)}50%{transform:scale(1.1);box-shadow:0 0 20px rgba(255,215,0,0.6)}}
.game-area{display:none;background:rgba(255,255,255,0.98);color:#333;border-radius:25px;padding:30px;margin:25px 0;backdrop-filter:blur(20px);animation:slideIn 0.6s ease;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
@keyframes slideIn{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
.back-btn{background:linear-gradient(45deg,#6c757d,#5a6268);color:white;border:none;padding:12px 25px;border-radius:30px;cursor:pointer;margin-bottom:25px;transition:all 0.3s ease;font-weight:600}
.back-btn:hover{background:linear-gradient(45deg,#5a6268,#495057);transform:scale(1.05)}
.sequence-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;max-width:250px;margin:20px auto}
.sequence-item{width:70px;height:70px;border-radius:20px;display:flex;align-items:center;justify-content:center;font-weight:bold;cursor:pointer;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);box-shadow:0 6px 20px rgba(0,0,0,0.2);font-size:1.1em}
.blue{background:linear-gradient(135deg,#3498db,#2980b9);color:white}
.red{background:linear-gradient(135deg,#e74c3c,#c0392b);color:white}
.green{background:linear-gradient(135deg,#2ecc71,#27ae60);color:white}
.yellow{background:linear-gradient(135deg,#f1c40f,#f39c12);color:#333}
.purple{background:linear-gradient(135deg,#9b59b6,#8e44ad);color:white}
.orange{background:linear-gradient(135deg,#e67e22,#d35400);color:white}
.sequence-item:hover{transform:scale(1.2) rotate(8deg);box-shadow:0 10px 30px rgba(0,0,0,0.4)}
.sequence-item.clicked{animation:clickPulse 0.4s ease}
@keyframes clickPulse{0%{transform:scale(1)}50%{transform:scale(1.3) rotate(15deg)}100%{transform:scale(1)}}
.math-input{font-size:1.8em;padding:15px;border:3px solid #ddd;border-radius:20px;text-align:center;width:160px;margin:15px;transition:all 0.3s ease;background:rgba(255,255,255,0.9)}
.math-input:focus{border-color:#667eea;box-shadow:0 0 20px rgba(102,126,234,0.4);outline:none;transform:scale(1.05)}
.reaction-circle{width:180px;height:180px;border-radius:50%;margin:40px auto;display:flex;align-items:center;justify-content:center;font-weight:bold;cursor:pointer;transition:all 0.4s ease;box-shadow:0 10px 30px rgba(0,0,0,0.3);font-size:1.2em}
.waiting{background:linear-gradient(135deg,#e74c3c,#c0392b);animation:waitingPulse 1.5s ease-in-out infinite}
.ready{background:linear-gradient(135deg,#2ecc71,#27ae60);animation:readyGlow 0.8s ease}
@keyframes waitingPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
@keyframes readyGlow{0%{transform:scale(1);box-shadow:0 10px 30px rgba(0,0,0,0.3)}50%{transform:scale(1.15);box-shadow:0 15px 40px rgba(46,204,113,0.6)}100%{transform:scale(1);box-shadow:0 10px 30px rgba(0,0,0,0.3)}}
.score-display{font-size:1.4em;margin:25px 0;padding:18px;background:linear-gradient(45deg,rgba(102,126,234,0.2),rgba(118,75,162,0.2));border-radius:15px;font-weight:bold;border:2px solid rgba(255,255,255,0.3)}
.word-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;max-width:300px;margin:20px auto}
.letter-tile{width:60px;height:60px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;border-radius:15px;font-size:1.3em;font-weight:bold;cursor:pointer;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(0,0,0,0.2)}
.letter-tile:hover{transform:scale(1.1);box-shadow:0 6px 20px rgba(0,0,0,0.3)}
.letter-tile.selected{background:linear-gradient(135deg,#ff6b6b,#ff8e53);transform:scale(1.05)}
.pattern-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;max-width:280px;margin:20px auto}
.pattern-cell{width:60px;height:60px;border:2px solid #ddd;border-radius:12px;cursor:pointer;transition:all 0.3s ease;background:rgba(255,255,255,0.1)}
.pattern-cell.active{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eea}
.pattern-cell:hover{transform:scale(1.1);border-color:#667eea}
.multiplayer-section{background:rgba(255,255,255,0.1);border-radius:20px;padding:20px;margin:20px 0;border:1px solid rgba(255,255,255,0.2)}
.player-list{display:flex;justify-content:space-around;margin:15px 0}
.player{text-align:center;padding:10px;border-radius:10px;background:rgba(255,255,255,0.1)}
.player.active{background:linear-gradient(45deg,#ff6b6b,#ff8e53)}
.cyber{background:linear-gradient(135deg,#0f3460,#e94560)}
.neon{background:linear-gradient(135deg,#ff006e,#8338ec)}
.candy{background:linear-gradient(135deg,#ff9a9e,#fecfef)}
.space{background:linear-gradient(135deg,#2c3e50,#34495e)}
.ocean{background:linear-gradient(135deg,#00b4db,#0083b0)}
.footer{margin-top:40px;font-size:0.9em;opacity:0.8;padding:15px 0;border-top:1px solid rgba(255,255,255,0.1)}
.update-banner{background:linear-gradient(45deg,#28a745,#20c997);padding:15px;border-radius:15px;margin-bottom:20px;font-weight:600;animation:bounce 2s infinite}
@keyframes bounce{0%,20%,50%,80%,100%{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}
.play-btn{background:linear-gradient(45deg,#667eea,#764ba2);color:white;border:none;padding:15px 30px;border-radius:30px;cursor:pointer;font-size:1.1em;font-weight:600;margin:10px;transition:all 0.3s ease;box-shadow:0 6px 20px rgba(0,0,0,0.2)}
.play-btn:hover{background:linear-gradient(45deg,#764ba2,#667eea);transform:scale(1.05);box-shadow:0 8px 25px rgba(0,0,0,0.3)}
</style>
</head>
<body>
<div class="container">
<div class="update-banner">🚀 New Enhanced Version 2.0 - More Games & Features!</div>
<div class="theme-controls">
<button class="theme-btn" onclick="cycleTheme()" title="Change Theme">🎨</button>
<button class="theme-btn" onclick="toggleSound()" title="Toggle Sound">🔊</button>
</div>
<div id="main-menu">
<h1>🧠 Brain Games Hub V2</h1>
<div class="version-badge">Enhanced Edition</div>
<p class="subtitle">Advanced cognitive training with 6 games</p>

<div class="stats-bar">
<div class="stat-row">
<span class="stat-label">Games Played:</span>
<span class="stat-value" id="games-played">0</span>
</div>
<div class="stat-row">
<span class="stat-label">Best Streak:</span>
<span class="stat-value" id="best-streak">0</span>
</div>
<div class="stat-row">
<span class="stat-label">Total Score:</span>
<span class="stat-value" id="total-score">0</span>
</div>
</div>

<div class="achievements">
<div class="achievement" id="achievement-1" title="First Win">🏆</div>
<div class="achievement" id="achievement-2" title="Perfect Score">⭐</div>
<div class="achievement" id="achievement-3" title="Speed Master">⚡</div>
<div class="achievement" id="achievement-4" title="Memory Expert">🧠</div>
<div class="achievement" id="achievement-5" title="Math Genius">📊</div>
<div class="achievement" id="achievement-6" title="Pattern Pro">🎯</div>
</div>

<div class="game-grid">
<div class="game-card" onclick="startGame('memory')">
<div class="game-icon">🧠</div>
<div class="game-title">Memory Master</div>
<div class="game-subtitle">Enhanced sequences</div>
</div>
<div class="game-card" onclick="startGame('math')">
<div class="game-icon">🔢</div>
<div class="game-title">Math Challenge</div>
<div class="game-subtitle">Quick calculations</div>
</div>
<div class="game-card" onclick="startGame('reaction')">
<div class="game-icon">⚡</div>
<div class="game-title">Lightning Reflex</div>
<div class="game-subtitle">Speed training</div>
</div>
<div class="game-card" onclick="startGame('pattern')">
<div class="game-icon">🎯</div>
<div class="game-title">Pattern Puzzle</div>
<div class="game-subtitle">Visual patterns</div>
</div>
<div class="game-card" onclick="startGame('word')">
<div class="new-badge">NEW</div>
<div class="game-icon">📝</div>
<div class="game-title">Word Builder</div>
<div class="game-subtitle">Language skills</div>
</div>
<div class="game-card" onclick="startGame('logic')">
<div class="new-badge">NEW</div>
<div class="game-icon">🧩</div>
<div class="game-title">Logic Chain</div>
<div class="game-subtitle">Problem solving</div>
</div>
</div>

<div class="multiplayer-section">
<h3>🌐 Challenge Friends</h3>
<div class="player-list">
<div class="player active">You<br><small>Ready</small></div>
<div class="player">Friend<br><small>Offline</small></div>
</div>
<button class="play-btn" onclick="alert('Multiplayer coming in next update!')">Start Multiplayer</button>
</div>
</div>

<!-- Memory Game -->
<div id="memory-game" class="game-area">
<button class="back-btn" onclick="showMenu()">← Back to Menu</button>
<h2>🧠 Enhanced Memory Master</h2>
<div class="score-display">Level: <span id="memory-level">1</span> | Score: <span id="memory-score">0</span></div>
<div id="memory-sequence" class="sequence-grid"></div>
<button id="memory-start" class="play-btn" onclick="startMemoryGame()">Start Enhanced Memory</button>
</div>

<!-- Math Game -->
<div id="math-game" class="game-area">
<button class="back-btn" onclick="showMenu()">← Back to Menu</button>
<h2>🔢 Advanced Math Challenge</h2>
<div class="score-display">Score: <span id="math-score">0</span> | Time: <span id="math-time">60</span>s</div>
<div id="math-problem"></div>
<input type="number" id="math-input" class="math-input" placeholder="Answer">
<button class="play-btn" onclick="startMathGame()">Start Math Challenge</button>
</div>

<!-- Reaction Game -->
<div id="reaction-game" class="game-area">
<button class="back-btn" onclick="showMenu()">← Back to Menu</button>
<h2>⚡ Lightning Reflex Pro</h2>
<div class="score-display">Best Time: <span id="reaction-best">--</span>ms | Attempts: <span id="reaction-attempts">0</span></div>
<div id="reaction-circle" class="reaction-circle waiting" onclick="reactionClick()">Click when GREEN!</div>
<button class="play-btn" onclick="startReactionGame()">Start Reflex Training</button>
</div>

<!-- Pattern Game -->
<div id="pattern-game" class="game-area">
<button class="back-btn" onclick="showMenu()">← Back to Menu</button>
<h2>🎯 Advanced Pattern Puzzle</h2>
<div class="score-display">Level: <span id="pattern-level">1</span> | Score: <span id="pattern-score">0</span></div>
<div id="pattern-grid" class="pattern-grid"></div>
<button class="play-btn" onclick="startPatternGame()">Start Pattern Challenge</button>
</div>

<!-- Word Game -->
<div id="word-game" class="game-area">
<button class="back-btn" onclick="showMenu()">← Back to Menu</button>
<h2>📝 Word Builder Pro</h2>
<div class="score-display">Words Found: <span id="word-count">0</span> | Score: <span id="word-score">0</span></div>
<div id="word-grid" class="word-grid"></div>
<div id="current-word"></div>
<button class="play-btn" onclick="startWordGame()">Start Word Building</button>
</div>

<!-- Logic Game -->
<div id="logic-game" class="game-area">
<button class="back-btn" onclick="showMenu()">← Back to Menu</button>
<h2>🧩 Logic Chain Master</h2>
<div class="score-display">Chain: <span id="logic-chain">0</span> | Score: <span id="logic-score">0</span></div>
<div id="logic-puzzle"></div>
<button class="play-btn" onclick="startLogicGame()">Start Logic Challenge</button>
</div>

<div class="footer">
<p>Brain Games Hub V2.0 - Enhanced Cognitive Training Platform</p>
<p>6 Games • Advanced Themes • Multiplayer Ready</p>
</div>
</div>

<script>
let currentTheme = 0;
const themes = ['default', 'cyber', 'neon', 'candy', 'space', 'ocean'];
let soundEnabled = true;
let gameStats = JSON.parse(localStorage.getItem('brainGamesV2Stats')) || {
    gamesPlayed: 0,
    bestStreak: 0,
    totalScore: 0,
    achievements: []
};

// Enhanced Audio System
function playSound(type) {
    if (!soundEnabled) return;
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    switch(type) {
        case 'click':
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            break;
        case 'success':
            oscillator.frequency.setValueAtTime(1200, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(1600, audioContext.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            break;
        case 'levelup':
            for(let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const osc = audioContext.createOscillator();
                    const gain = audioContext.createGain();
                    osc.connect(gain);
                    gain.connect(audioContext.destination);
                    osc.frequency.setValueAtTime(1200 + i * 200, audioContext.currentTime);
                    gain.gain.setValueAtTime(0.15, audioContext.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    osc.start();
                    osc.stop(audioContext.currentTime + 0.2);
                }, i * 100);
            }
            return;
    }
    
    oscillator.start();
    oscillator.stop(audioContext.currentTime + 0.3);
}

function cycleTheme() {
    currentTheme = (currentTheme + 1) % themes.length;
    document.body.className = themes[currentTheme];
    playSound('click');
}

function toggleSound() {
    soundEnabled = !soundEnabled;
    const btn = document.querySelector('.theme-btn[title="Toggle Sound"]');
    btn.textContent = soundEnabled ? '🔊' : '🔇';
    playSound('click');
}

function updateStats() {
    document.getElementById('games-played').textContent = gameStats.gamesPlayed;
    document.getElementById('best-streak').textContent = gameStats.bestStreak;
    document.getElementById('total-score').textContent = gameStats.totalScore;
    localStorage.setItem('brainGamesV2Stats', JSON.stringify(gameStats));
}

function unlockAchievement(id) {
    if (!gameStats.achievements.includes(id)) {
        gameStats.achievements.push(id);
        document.getElementById(`achievement-${id}`).classList.add('unlocked');
        playSound('levelup');
        setTimeout(() => alert(`🏆 New Achievement Unlocked!`), 100);
    }
}

function showMenu() {
    document.querySelectorAll('.game-area').forEach(area => area.style.display = 'none');
    document.getElementById('main-menu').style.display = 'block';
}

function startGame(gameType) {
    playSound('click');
    document.getElementById('main-menu').style.display = 'none';
    document.getElementById(gameType + '-game').style.display = 'block';
    gameStats.gamesPlayed++;
    updateStats();
}

// Enhanced Memory Game
let memorySequence = [];
let memoryPlayerSequence = [];
let memoryLevel = 1;
let memoryScore = 0;
let memoryColors = ['blue', 'red', 'green', 'yellow', 'purple', 'orange'];

function startMemoryGame() {
    memoryLevel = 1;
    memoryScore = 0;
    memorySequence = [];
    document.getElementById('memory-level').textContent = memoryLevel;
    document.getElementById('memory-score').textContent = memoryScore;
    generateMemorySequence();
}

function generateMemorySequence() {
    memorySequence.push(memoryColors[Math.floor(Math.random() * memoryColors.length)]);
    displayMemorySequence();
}

function displayMemorySequence() {
    const grid = document.getElementById('memory-sequence');
    grid.innerHTML = '';
    
    memoryColors.forEach(color => {
        const item = document.createElement('div');
        item.className = `sequence-item ${color}`;
        item.onclick = () => memoryClick(color);
        grid.appendChild(item);
    });
    
    // Show sequence
    let index = 0;
    const showNext = () => {
        if (index < memorySequence.length) {
            const color = memorySequence[index];
            const element = grid.querySelector(`.${color}`);
            element.style.transform = 'scale(1.3)';
            element.style.boxShadow = '0 0 30px rgba(255,255,255,0.8)';
            playSound('click');
            
            setTimeout(() => {
                element.style.transform = 'scale(1)';
                element.style.boxShadow = '0 6px 20px rgba(0,0,0,0.2)';
                index++;
                setTimeout(showNext, 200);
            }, 500);
        } else {
            memoryPlayerSequence = [];
        }
    };
    showNext();
}

function memoryClick(color) {
    memoryPlayerSequence.push(color);
    playSound('click');
    
    // Check if correct
    const index = memoryPlayerSequence.length - 1;
    if (memoryPlayerSequence[index] !== memorySequence[index]) {
        alert(`Game Over! Level ${memoryLevel} reached. Score: ${memoryScore}`);
        gameStats.totalScore += memoryScore;
        if (memoryLevel >= 5) unlockAchievement(4);
        updateStats();
        showMenu();
        return;
    }
    
    // Check if sequence complete
    if (memoryPlayerSequence.length === memorySequence.length) {
        memoryLevel++;
        memoryScore += memoryLevel * 10;
        document.getElementById('memory-level').textContent = memoryLevel;
        document.getElementById('memory-score').textContent = memoryScore;
        playSound('success');
        
        setTimeout(() => {
            generateMemorySequence();
        }, 1000);
    }
}

// Enhanced Math Game
let mathScore = 0;
let mathTimer = 60;
let mathInterval;

function startMathGame() {
    mathScore = 0;
    mathTimer = 60;
    document.getElementById('math-score').textContent = mathScore;
    document.getElementById('math-time').textContent = mathTimer;
    
    mathInterval = setInterval(() => {
        mathTimer--;
        document.getElementById('math-time').textContent = mathTimer;
        if (mathTimer <= 0) {
            clearInterval(mathInterval);
            alert(`Time's up! Final score: ${mathScore}`);
            gameStats.totalScore += mathScore;
            if (mathScore >= 200) unlockAchievement(5);
            updateStats();
            showMenu();
        }
    }, 1000);
    
    generateMathProblem();
    document.getElementById('math-input').focus();
}

function generateMathProblem() {
    const operations = ['+', '-', '*'];
    const op = operations[Math.floor(Math.random() * operations.length)];
    let a, b, answer;
    
    switch(op) {
        case '+':
            a = Math.floor(Math.random() * 50) + 1;
            b = Math.floor(Math.random() * 50) + 1;
            answer = a + b;
            break;
        case '-':
            a = Math.floor(Math.random() * 50) + 25;
            b = Math.floor(Math.random() * 25) + 1;
            answer = a - b;
            break;
        case '*':
            a = Math.floor(Math.random() * 12) + 1;
            b = Math.floor(Math.random() * 12) + 1;
            answer = a * b;
            break;
    }
    
    document.getElementById('math-problem').innerHTML = `<h3>${a} ${op} ${b} = ?</h3>`;
    
    const input = document.getElementById('math-input');
    input.value = '';
    input.onkeypress = (e) => {
        if (e.key === 'Enter') {
            if (parseInt(input.value) === answer) {
                mathScore += 10;
                document.getElementById('math-score').textContent = mathScore;
                playSound('success');
                generateMathProblem();
            } else {
                playSound('click');
                input.style.borderColor = '#e74c3c';
                setTimeout(() => input.style.borderColor = '#ddd', 200);
            }
        }
    };
}

// Enhanced Reaction Game
let reactionStartTime;
let reactionBest = localStorage.getItem('reactionBest') || null;
let reactionAttempts = 0;

function startReactionGame() {
    reactionAttempts = 0;
    document.getElementById('reaction-attempts').textContent = reactionAttempts;
    if (reactionBest) document.getElementById('reaction-best').textContent = reactionBest;
    prepareReaction();
}

function prepareReaction() {
    const circle = document.getElementById('reaction-circle');
    circle.className = 'reaction-circle waiting';
    circle.textContent = 'Wait for GREEN...';
    
    const delay = Math.random() * 4000 + 2000;
    setTimeout(() => {
        circle.className = 'reaction-circle ready';
        circle.textContent = 'CLICK NOW!';
        reactionStartTime = Date.now();
    }, delay);
}

function reactionClick() {
    const circle = document.getElementById('reaction-circle');
    if (circle.classList.contains('ready')) {
        const reactionTime = Date.now() - reactionStartTime;
        reactionAttempts++;
        
        if (!reactionBest || reactionTime < reactionBest) {
            reactionBest = reactionTime;
            localStorage.setItem('reactionBest', reactionBest);
            playSound('levelup');
            if (reactionTime < 300) unl
        setTimeout(generatePattern, 1000);
    } else {
        alert(`Wrong pattern! Level ${patternLevel} reached. Score: ${patternScore}`);
        gameStats.totalScore += patternScore;
        updateStats();
        showMenu();
    }
}

// Word Game
let wordLetters = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P'];
let selectedWord = '';
let wordsFound = 0;
let wordScore = 0;
let validWords = ['CAB','BAD','DAB','FAD','FACE','CAFE','BEAD','DEAF','BEEF','FEED'];

function startWordGame() {
    wordsFound = 0;
    wordScore = 0;
    selectedWord = '';
    document.getElementById('word-count').textContent = wordsFound;
    document.getElementById('word-score').textContent = wordScore;
    document.getElementById('current-word').textContent = '';
    
    const grid = document.getElementById('word-grid');
    grid.innerHTML = '';
    
    wordLetters.forEach(letter => {
        const tile = document.createElement('button');
        tile.className = 'letter-tile';
        tile.textContent = letter;
        tile.onclick = () => selectLetter(tile, letter);
        grid.appendChild(tile);
    });
}

function selectLetter(tile, letter) {
    if (tile.classList.contains('selected')) {
        tile.classList.remove('selected');
        selectedWord = selectedWord.replace(letter, '');
    } else {
        tile.classList.add('selected');
        selectedWord += letter;
    }
    
    document.getElementById('current-word').textContent = selectedWord;
    playSound('click');
    
    if (validWords.includes(selectedWord)) {
        wordsFound++;
        wordScore += selectedWord.length * 10;
        document.getElementById('word-count').textContent = wordsFound;
        document.getElementById('word-score').textContent = wordScore;
        playSound('success');
        
        // Clear selection
        document.querySelectorAll('.letter-tile').forEach(t => t.classList.remove('selected'));
        selectedWord = '';
        document.getElementById('current-word').textContent = '';
        
        if (wordsFound >= 5) {
            alert(`Excellent! You found ${wordsFound} words. Score: ${wordScore}`);
            gameStats.totalScore += wordScore;
            updateStats();
            showMenu();
        }
    }
}

// Logic Game
let logicChain = 0;
let logicScore = 0;
let currentLogicProblem;

function startLogicGame() {
    logicChain = 0;
    logicScore = 0;
    document.getElementById('logic-chain').textContent = logicChain;
    document.getElementById('logic-score').textContent = logicScore;
    generateLogicProblem();
}

function generateLogicProblem() {
    const problems = [
        {question: "If A = 1, B = 2, C = 3, what is D?", answer: 4, options: [3,4,5,6]},
        {question: "Complete: 2, 4, 8, 16, ?", answer: 32, options: [24,28,32,36]},
        {question: "If all cats are animals, and Felix is a cat, Felix is a?", answer: "Animal", options: ["Plant","Animal","Mineral","Unknown"]},
        {question: "What comes next: Circle, Square, Triangle, ?", answer: "Pentagon", options: ["Pentagon","Hexagon","Rectangle","Oval"]}
    ];
    
    currentLogicProblem = problems[Math.floor(Math.random() * problems.length)];
    
    let html = `<h3>${currentLogicProblem.question}</h3><div class="pattern-grid">`;
    currentLogicProblem.options.forEach(option => {
        html += `<button class="letter-tile" onclick="checkLogicAnswer('${option}')">${option}</button>`;
    });
    html += '</div>';
    
    document.getElementById('logic-puzzle').innerHTML = html;
}

function checkLogicAnswer(answer) {
    if (answer == currentLogicProblem.answer) {
        logicChain++;
        logicScore += logicChain * 20;
        document.getElementById('logic-chain').textContent = logicChain;
        document.getElementById('logic-score').textContent = logicScore;
        playSound('success');
        
        setTimeout(generateLogicProblem, 1000);
    } else {
        alert(`Wrong answer! Chain broken at ${logicChain}. Score: ${logicScore}`);
        gameStats.totalScore += logicScore;
        updateStats();
        showMenu();
    }
}

// Initialize
updateStats();
if (gameStats.gamesPlayed > 0) unlockAchievement(1);
</script>
</body>
</html>








